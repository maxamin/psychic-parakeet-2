FROM python:3.10-alpine AS builder

WORKDIR /tmp

RUN apk add --update-cache git && \
    rm -rf /var/cache/apk/*

ARG SQLMAP_VERSION=1.6.8

RUN git clone --depth 1 --branch ${SQLMAP_VERSION} https://github.com/sqlmapproject/sqlmap.git

FROM python:3.10-alpine

COPY --from=builder /tmp/sqlmap /sqlmap

RUN ln -s /sqlmap/sqlmap.py /usr/local/bin/sqlmap

ENTRYPOINT ["/usr/local/bin/sqlmap"]
